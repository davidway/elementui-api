package com.blockchain.service.impl;

import org.apache.commons.lang3.StringUtils;
import org.slf4j.Logger;
import org.slf4j.LoggerFactory;
import org.springframework.stereotype.Service;

import com.blockchain.VO.ConfigPropertiesFormVO;
import com.blockchain.exception.ServiceException;
import com.blockchain.service.ConfigPropertiesService;
import com.blockchain.util.ConfigUtils;
import com.tencent.trustsql.sdk.exception.TrustSDKException;

@Service
public class ConfigPropertiesServiceImpl implements ConfigPropertiesService {

	Logger logger = LoggerFactory.getLogger(ConfigPropertiesServiceImpl.class);
	@Override
	public void add(ConfigPropertiesFormVO configPropertiesFormVO) throws TrustSDKException, ServiceException {
		String chainId = configPropertiesFormVO.getChainId();
		String ledgerId = configPropertiesFormVO.getLedgerId();
		String mchId = configPropertiesFormVO.getMchId();
		String nodeId = configPropertiesFormVO.getNodeId();
		String createUserPrivateKey = configPropertiesFormVO.getCreateUserPrivateKey();
		String createUserPublicKey = configPropertiesFormVO.getCreateUserPublicKey();
		
	
		if (StringUtils.isNotBlank(chainId)) {
			ConfigUtils.setChainId(chainId);
		}
		if (StringUtils.isNotBlank(ledgerId)) {

			ConfigUtils.setLedgerId(ledgerId);
		}
		if (StringUtils.isNotBlank(mchId)) {
			ConfigUtils.setMchId(mchId);
		}
		if (StringUtils.isNotBlank(nodeId)) {
			ConfigUtils.setNodeId(nodeId);
		}
		if (StringUtils.isNotBlank(createUserPrivateKey)) {
			ConfigUtils.setCreateUserPrivateKey(createUserPrivateKey);
		}
		if (StringUtils.isNotBlank(createUserPublicKey)) {
			ConfigUtils.setCreateUserPublicKey(createUserPublicKey);
		}

		return;
	}

	@Override
	public ConfigPropertiesFormVO get() {
		ConfigPropertiesFormVO configPropertiesFormVO = new ConfigPropertiesFormVO();
		String chainId = ConfigUtils.getChainId();
		String ledgerId = ConfigUtils.getLedgerId();
		String mchId = ConfigUtils.getMchId();
		String nodeId = ConfigUtils.getNodeId();
		String createUserPrivateKey = ConfigUtils.getCreateUserPrivateKey();
		String createUserPublicKey = ConfigUtils.getCreateUserPublicKey();
		
		configPropertiesFormVO.setChainId(chainId);

		configPropertiesFormVO.setLedgerId(ledgerId);

		configPropertiesFormVO.setMchId(mchId);

		configPropertiesFormVO.setNodeId(nodeId);

		configPropertiesFormVO.setCreateUserPrivateKey(createUserPrivateKey);

		configPropertiesFormVO.setCreateUserPublicKey(createUserPublicKey);
		return configPropertiesFormVO;
		
	}

}
